<% layout('layout') %>

<div class="container my-5">
  <h1 class="mb-4 text-center">La nostra storia</h1>

  <div class="timeline">
    <% let eventiPerAnno = {}; storia.forEach(function(item) { if
    (!eventiPerAnno[item.anno]) { eventiPerAnno[item.anno] = []; }
    eventiPerAnno[item.anno].push(item); }); %> <%
    Object.keys(eventiPerAnno).forEach(function(anno) { %>
    <div class="mb-4 p-3 border-custom rounded">
      <h4 class="fw-bold text-primary mb-3"><%= anno %></h4>
      <% eventiPerAnno[anno].forEach(function(ev) { %>
      <div class="row mb-1 align-items-center">
        <% if (ev.img && ev.img.trim() !== "") { %>
        <div class="col-8">
          <p class="text-justify"><%= ev.evento %></p>
        </div>
        <div class="col-4">
          <a
            href="<%= ev.img %>"
            target="_blank"
            rel="noopener noreferrer"
            class="btn btn-md btn-primary mt-1"
          >
            ðŸ“· Vedi foto
          </a>
          <% } else { %>
          <div class="col-12">
            <p class="text-justify"><%= ev.evento %></p>
            <% } %>
          </div>
        </div>
        <% }); %>
      </div>
      <% }); %>
    </div>
  </div>
</div>
